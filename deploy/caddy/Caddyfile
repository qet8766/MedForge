{
	email {$ACME_EMAIL}
}

# Reusable TLS snippet — swap the DNS provider module as needed.
(tls_dns) {
	tls {
		dns cloudflare {env.CF_API_TOKEN}
	}
}

# ── Frontend ──────────────────────────────────────────────
{$DOMAIN} {
	import tls_dns
	reverse_proxy medforge-web:3000
}

external.{$DOMAIN} {
	import tls_dns
	reverse_proxy medforge-web:3000
}

internal.{$DOMAIN} {
	import tls_dns
	reverse_proxy medforge-web:3000
}

# ── Dev frontend (hot-reload) ────────────────────────────
dev.{$DOMAIN} {
	import tls_dns
	reverse_proxy medforge-web-dev:3000
}

# ── API ───────────────────────────────────────────────────
api.{$DOMAIN} {
	import tls_dns
	reverse_proxy medforge-api:8000
}

# Session containers are accessed via SSH (ports 10000–10999 mapped to host),
# not through Caddy HTTP proxying. No wildcard session routing needed.
