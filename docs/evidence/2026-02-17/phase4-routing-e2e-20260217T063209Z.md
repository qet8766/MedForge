## Phase 4 Routing and End-to-End Evidence (2026-02-17)

Generated by: `ops/host/validate-phase4-routing-e2e.sh`

Runtime:
- phase id: `phase4-routing-e2e`
- run id: `20260217T063209Z`
- public web URL: `https://medforge.medforge.xyz`
- public api URL: `https://api.medforge.medforge.xyz`
- pack image: `medforge-pack-default@sha256:7e44d4e67aa5c7bbc51701be7f370f45de35794cc7f2504f761b1a510f1c1a6e`


### Remote-Public Preflight

61.72.69.176
medforge.medforge.xyz.
61.72.69.176
medforge.medforge.xyz.
61.72.69.176
- DNS + TLS + health preflight: PASS

### Create Sessions

- create A: `{"data":{"message":"Session started.","session":{"id":"b2932cae-0749-4f10-8764-a59102e1baed","user_id":"b1415639-5ce1-4ef7-8eb5-434aa653cf07","tier":"public","pack_id":"00000000-0000-0000-0000-000000000100","status":"running","container_id":"6fed50e354ff9f7396ace756bb55b7130d005553a038a9bd93fd353da19e0463","gpu_id":0,"slug":"oxvlcxi3","workspace_zfs":"tank/medforge/workspaces/b1415639-5ce1-4ef7-8eb5-434aa653cf07/b2932cae-0749-4f10-8764-a59102e1baed","created_at":"2026-02-17T06:32:10.589296","started_at":"2026-02-17T06:32:11","stopped_at":null,"error_message":null}},"meta":{"request_id":"07abc95b-3ad7-4794-accb-2bde1ef7ab4c","api_version":"v1.0","timestamp":"2026-02-17T06:32:11.170757Z","limit":null,"next_cursor":null,"has_more":null}}`
- create B: `{"data":{"message":"Session started.","session":{"id":"09e31523-be7b-4e7b-8935-5f3b8e634272","user_id":"d13596fe-a2b4-44d4-99ef-da45c6d31a35","tier":"public","pack_id":"00000000-0000-0000-0000-000000000100","status":"running","container_id":"1602cc8839575243e82ae3e2da5ffae6c901a234871467471dfbaf6e6171c2c7","gpu_id":1,"slug":"a7mu7v5z","workspace_zfs":"tank/medforge/workspaces/d13596fe-a2b4-44d4-99ef-da45c6d31a35/09e31523-be7b-4e7b-8935-5f3b8e634272","created_at":"2026-02-17T06:32:11.313468","started_at":"2026-02-17T06:32:11","stopped_at":null,"error_message":null}},"meta":{"request_id":"cd54c35a-f14e-40e6-b2b0-f8e23c64a4c9","api_version":"v1.0","timestamp":"2026-02-17T06:32:11.882852Z","limit":null,"next_cursor":null,"has_more":null}}`

### Routing Authorization Matrix

- unauthenticated wildcard root: `401` body=`{"type":"https://medforge.dev/problems/http/401","title":"Unauthorized","status":401,"detail":"Authentication required.","instance":"/api/v1/auth/session-proxy","code":"401","request_id":"c5b8d9f9-325b-488c-bc03-dd1ad2a44649"}`
- non-owner wildcard root: `403` body=`{"type":"https://medforge.dev/problems/http/403","title":"Forbidden","status":403,"detail":"Session access denied.","instance":"/api/v1/auth/session-proxy","code":"403","request_id":"e24554f5-e42e-4b87-8a91-a1767e722a98"}`
- owner wildcard root: `200`
- blocked wildcard internal path unauthenticated: `403` body=`Forbidden`
- blocked wildcard internal path owner: `403` body=`Forbidden`
- owner spoof attempt via api host: `200` x-upstream=`mf-session-oxvlcxi3:8080`

### East-West Isolation

- firewall: `Eastâ€“west isolation applied (bridge=br-55088beacfcf, caddy=172.30.0.2)`
- session B -> session A :8080 blocked (exit=`28`, stderr=`curl: (28) Connection timed out after 3002 milliseconds`)

### End-to-End Core Runtime

- GPU in session A: `NVIDIA GeForce RTX 5090`
- workspace write/read: `alpha`
- stop A: `{"data":{"message":"Session stop requested."},"meta":{"request_id":"e974d861-0d67-4869-a639-4f7dad122682","api_version":"v1.0","timestamp":"2026-02-17T06:32:16.047058Z","limit":null,"next_cursor":null,"has_more":null}}`
- stopped host check: `404` body=`{"type":"https://medforge.dev/problems/http/404","title":"Not Found","status":404,"detail":"Session not found.","instance":"/api/v1/auth/session-proxy","code":"404","request_id":"a9d8ee2d-fb2a-49fa-9e65-5ca0976d8c8f"}`
- snapshot: `tank/medforge/workspaces/b1415639-5ce1-4ef7-8eb5-434aa653cf07/b2932cae-0749-4f10-8764-a59102e1baed@stop-1771309952355`
- stop B: `{"data":{"message":"Session stop requested."},"meta":{"request_id":"94b475aa-7735-476d-b454-6189d768e8c8","api_version":"v1.0","timestamp":"2026-02-17T06:32:33.346418Z","limit":null,"next_cursor":null,"has_more":null}}`

### Browser + Websocket Lane

## Verdict
- phase: `phase4-routing-e2e`
- status: FAIL
- log: `/home/shk/projects/MedForge/docs/evidence/2026-02-17/phase4-routing-e2e-20260217T063209Z.log`
