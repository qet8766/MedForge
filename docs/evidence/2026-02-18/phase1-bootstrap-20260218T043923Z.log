 Image medforge-api:local Building 
 Image compose-medforge-web Building 
 Image compose-medforge-caddy Building 
#1 [internal] load local bake definitions
#1 reading from stdin 1.71kB done
#1 DONE 0.0s

#2 [medforge-caddy internal] load build definition from Dockerfile
#2 transferring dockerfile: 450B done
#2 DONE 0.0s

#3 [medforge-api internal] load build definition from Dockerfile
#3 transferring dockerfile: 1.86kB done
#3 DONE 0.1s

#4 [medforge-web internal] load build definition from Dockerfile
#4 transferring dockerfile: 1.29kB done
#4 DONE 0.1s

#5 [medforge-caddy internal] load metadata for docker.io/library/caddy:2@sha256:c3d7ee5d2b11f9dc54f947f68a734c84e9c9666c92c88a7f30b9cba5da182adb
#5 DONE 0.1s

#6 [medforge-web internal] load metadata for docker.io/library/node:20-alpine
#6 DONE 0.1s

#7 [medforge-caddy internal] load metadata for docker.io/library/caddy:2-builder@sha256:01668408cc26e2e00c9d067c30cb43b2ba14ad1f2808beda55503cb2a31f59dc
#7 DONE 0.1s

#8 [medforge-caddy internal] load .dockerignore
#8 transferring context: 2B done
#8 DONE 0.0s

#9 [medforge-web internal] load .dockerignore
#9 transferring context: 391B done
#9 DONE 0.0s

#10 [medforge-web internal] load build context
#10 DONE 0.0s

#11 [medforge-caddy stage-1 1/2] FROM docker.io/library/caddy:2@sha256:c3d7ee5d2b11f9dc54f947f68a734c84e9c9666c92c88a7f30b9cba5da182adb
#11 resolve docker.io/library/caddy:2@sha256:c3d7ee5d2b11f9dc54f947f68a734c84e9c9666c92c88a7f30b9cba5da182adb 0.1s done
#11 DONE 0.1s

#12 [medforge-caddy builder 1/2] FROM docker.io/library/caddy:2-builder@sha256:01668408cc26e2e00c9d067c30cb43b2ba14ad1f2808beda55503cb2a31f59dc
#12 resolve docker.io/library/caddy:2-builder@sha256:01668408cc26e2e00c9d067c30cb43b2ba14ad1f2808beda55503cb2a31f59dc 0.1s done
#12 DONE 0.1s

#13 [medforge-web builder 1/6] FROM docker.io/library/node:20-alpine@sha256:09e2b3d9726018aecf269bd35325f46bf75046a643a66d28360ec71132750ec8
#13 resolve docker.io/library/node:20-alpine@sha256:09e2b3d9726018aecf269bd35325f46bf75046a643a66d28360ec71132750ec8 0.1s done
#13 DONE 0.1s

#14 [medforge-caddy builder 2/2] RUN xcaddy build --with github.com/caddy-dns/cloudflare
#14 CACHED

#15 [medforge-caddy stage-1 2/2] COPY --from=builder /usr/bin/caddy /usr/bin/caddy
#15 CACHED

#10 [medforge-web internal] load build context
#10 transferring context: 10.74kB done
#10 DONE 0.0s

#16 [medforge-web builder 4/6] RUN npm ci --no-audit --no-fund
#16 CACHED

#17 [medforge-web runner 4/6] COPY --from=builder /app/public ./public
#17 CACHED

#18 [medforge-web builder 6/6] RUN npm run build
#18 CACHED

#19 [medforge-web builder 3/6] COPY package.json package-lock.json* ./
#19 CACHED

#20 [medforge-web builder 5/6] COPY . .
#20 CACHED

#21 [medforge-web runner 3/6] RUN addgroup --system --gid 1001 nextjs     && adduser --system --uid 1001 nextjs
#21 CACHED

#22 [medforge-web runner 5/6] COPY --from=builder --chown=nextjs:nextjs /app/.next/standalone ./
#22 CACHED

#23 [medforge-web builder 2/6] WORKDIR /app
#23 CACHED

#24 [medforge-web runner 6/6] COPY --from=builder --chown=nextjs:nextjs /app/.next/static ./.next/static
#24 CACHED

#25 [medforge-web] exporting to image
#25 exporting layers done
#25 exporting manifest sha256:8c35deafe280915c779d29b108fd2e7a3e2b948502f2c1853e079beda152fc14 done
#25 exporting config sha256:0cb9a2aeb6173dd2422f80a0d7f1e80058583821e95c1a935d01577ba6d8ce94 0.0s done
#25 exporting attestation manifest sha256:da8d22af6f25fe91a904b21978d4ea1c62ce26690c0d61d8b8be05d176bb001e 0.1s done
#25 exporting manifest list sha256:0598a2c9bba9fb30a284b08c199f246f7a5f92ceeaee5a177c208f9ea317afe1
#25 ...

#26 [medforge-caddy] exporting to image
#26 exporting layers done
#26 exporting manifest sha256:b463700f506373c916c63869919fdbd5abee2f47b37cc7989f27f84e7229a2ae done
#26 exporting config sha256:6b334487a46eb84c770484b68651c5f4ea0121c5d5e4a3788c2d622ea095c9fd done
#26 exporting attestation manifest sha256:bf7d75465e4de13ab8043f35f8450cf3590e0fd5944639f8b73c8fb05682a286 0.1s done
#26 exporting manifest list sha256:9fd828280399e09e0967f4b03a1d698aa3d997ea1a1e37b9629010f78d0ac080 0.0s done
#26 naming to docker.io/library/compose-medforge-caddy:latest 0.0s done
#26 unpacking to docker.io/library/compose-medforge-caddy:latest 0.0s done
#26 DONE 0.2s

#25 [medforge-web] exporting to image
#25 exporting manifest list sha256:0598a2c9bba9fb30a284b08c199f246f7a5f92ceeaee5a177c208f9ea317afe1 0.1s done
#25 naming to docker.io/library/compose-medforge-web:latest 0.0s done
#25 unpacking to docker.io/library/compose-medforge-web:latest 0.0s done
#25 DONE 0.3s

#27 [medforge-api] resolve image config for docker-image://docker.io/docker/dockerfile:1
#27 DONE 0.7s

#28 [medforge-caddy] resolving provenance for metadata file
#28 DONE 0.0s

#29 [medforge-web] resolving provenance for metadata file
#29 DONE 0.0s

#30 [medforge-api] docker-image://docker.io/docker/dockerfile:1@sha256:b6afd42430b15f2d2a4c5a02b919e98a525b785b1aaff16747d2f623364e39b6
#30 resolve docker.io/docker/dockerfile:1@sha256:b6afd42430b15f2d2a4c5a02b919e98a525b785b1aaff16747d2f623364e39b6 0.0s done
#30 CACHED

#31 [medforge-api internal] load metadata for docker.io/library/python:3.12-slim@sha256:9e01bf1ae5db7649a236da7be1e94ffbbbdd7a93f867dd0d8d5720d9e1f89fab
#31 DONE 0.0s

#32 [medforge-api internal] load .dockerignore
#32 transferring context: 443B done
#32 DONE 0.0s

#33 [medforge-api stage-0 1/8] FROM docker.io/library/python:3.12-slim@sha256:9e01bf1ae5db7649a236da7be1e94ffbbbdd7a93f867dd0d8d5720d9e1f89fab
#33 resolve docker.io/library/python:3.12-slim@sha256:9e01bf1ae5db7649a236da7be1e94ffbbbdd7a93f867dd0d8d5720d9e1f89fab 0.0s done
#33 DONE 0.1s

#34 [medforge-api internal] load build context
#34 transferring context: 9.45kB done
#34 DONE 0.0s

#35 [medforge-api stage-0 6/8] RUN --mount=type=cache,target=/root/.cache/uv     uv export --format requirements-txt --no-dev --frozen --no-emit-project       > /tmp/requirements.txt     && uv pip install --system -r /tmp/requirements.txt     && rm /tmp/requirements.txt
#35 CACHED

#36 [medforge-api stage-0 4/8] RUN curl -LsSf "https://astral.sh/uv/0.8.22/install.sh" | sh     && ln -s /root/.local/bin/uv /usr/local/bin/uv
#36 CACHED

#37 [medforge-api stage-0 2/8] WORKDIR /app
#37 CACHED

#38 [medforge-api stage-0 3/8] RUN --mount=type=cache,target=/var/cache/apt,sharing=locked     --mount=type=cache,target=/var/lib/apt/lists,sharing=locked     apt-get update     && sed -i 's/^Components: .*/Components: main contrib non-free non-free-firmware/'        /etc/apt/sources.list.d/debian.sources     && apt-get update     && apt-get install -y --no-install-recommends        curl ca-certificates kmod zfsutils-linux
#38 CACHED

#39 [medforge-api stage-0 5/8] COPY pyproject.toml uv.lock ./
#39 CACHED

#40 [medforge-api stage-0 7/8] COPY . .
#40 CACHED

#41 [medforge-api stage-0 8/8] RUN groupadd -g 995 docker || true     && useradd -r -m -s /bin/false -G docker medforge     && chown -R medforge:medforge /app
#41 CACHED

#42 [medforge-api] exporting to image
#42 exporting layers done
#42 exporting manifest sha256:53403a9804b051e1c70eb18a9588ecf42e5edbc828a632960282094ba6254751
#42 exporting manifest sha256:53403a9804b051e1c70eb18a9588ecf42e5edbc828a632960282094ba6254751 done
#42 exporting config sha256:5e3d45626522ba71aa8569609d31d21d67b89e80e61bac470a00b341caaa720a done
#42 exporting attestation manifest sha256:b5bdb1664f92ebb1ea4bdeec05f4a613e7ba3c151ff056c21d8b3ac29548b41c 0.0s done
#42 exporting manifest list sha256:c10b0c836ea8da6c9d02603209bba582eb23716c1ca7cd833563c0b43b983aa2 0.0s done
#42 naming to docker.io/library/medforge-api:local done
#42 unpacking to docker.io/library/medforge-api:local 0.0s done
#42 DONE 0.2s

#43 [medforge-api] resolving provenance for metadata file
#43 DONE 0.0s
 Image medforge-api:local Built 
 Image compose-medforge-web Built 
 Image compose-medforge-caddy Built 
time="2026-02-18T13:39:25+09:00" level=warning msg="Found orphan containers ([medforge-web-dev]) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up."
 Container medforge-db Running 
 Container medforge-api-worker Recreate 
 Container medforge-api Recreate 
 Container medforge-caddy Recreate 
 Container medforge-caddy Recreated 
 Container medforge-api Recreated 
 Container medforge-web Recreate 
 Container medforge-web Recreated 
 Container medforge-api-worker Recreated 
 Container medforge-api-worker Starting 
 Container medforge-caddy Starting 
 Container medforge-api Starting 
 Container medforge-api-worker Started 
 Container medforge-caddy Started 
 Container medforge-api Started 
 Container medforge-web Starting 
 Container medforge-web Started 
NAME                  IMAGE                                                                                COMMAND                  SERVICE               CREATED          STATUS                  PORTS
medforge-api          medforge-api:local                                                                   "uvicorn app.main:ap…"   medforge-api          11 seconds ago   Up Less than a second   8000/tcp
medforge-api-worker   medforge-api:local                                                                   "python -m app.worke…"   medforge-api-worker   11 seconds ago   Up Less than a second   8000/tcp
medforge-caddy        compose-medforge-caddy                                                               "caddy run --config …"   medforge-caddy        11 seconds ago   Up Less than a second   0.0.0.0:80->80/tcp, [::]:80->80/tcp, 0.0.0.0:443->443/tcp, [::]:443->443/tcp, 0.0.0.0:443->443/udp, [::]:443->443/udp, 2019/tcp
medforge-db           mariadb:11@sha256:7fcb6109db2ba31b22a5709c1eaf9e84f76c9f1b9b9031ef09f24092f7f207cc   "docker-entrypoint.s…"   medforge-db           18 hours ago     Up 7 hours              3306/tcp
medforge-web          compose-medforge-web                                                                 "docker-entrypoint.s…"   medforge-web          10 seconds ago   Up Less than a second   3000/tcp
medforge.medforge.xyz.
61.72.69.176
medforge.medforge.xyz.
61.72.69.176
medforge.medforge.xyz.
61.72.69.176

===== parallel check: External API Reachability =====
curl: (22) The requested URL returned error: 502
curl: (22) The requested URL returned error: 502
curl: (22) The requested URL returned error: 502
api ready on attempt 4/60

===== parallel check: External Web Reachability =====
web ready on attempt 1/60
gpu_count=7
pack_count=1
