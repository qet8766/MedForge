## Host Validation Evidence (2026-02-16)

Generated by: `infra/host/validate-gate56.sh`

Runtime:
- API URL: `http://127.0.0.1:8000`
- Pack image: `medforge-pack-default:local@sha256:120a60a1b01bb7d61b2aff516d12ab728f9dc3a1237e9f2fc04d04530676cc43`
- DB path: `/home/shk/projects/MedForge/apps/api/gate-evidence.db`
- Browser lane enabled: `true`
- Browser base URL: `http://medforge.localtest.me:18080`
- Browser domain: `localtest.me`
- Browser user: `e2e-1771229583@medforge.test`

### Create Sessions

- create A: `{"detail":"Session started.","session":{"id":"7e2931de-a704-4e93-afe9-2ce5912c5271","user_id":"00000000-0000-0000-0000-0000000000a1","tier":"PUBLIC","pack_id":"00000000-0000-0000-0000-000000000100","status":"running","container_id":"24d01f241cfafc1f901b397687a26f7f923177472779e80869e462288a9c3680","gpu_id":0,"slug":"pmqtcizg","workspace_zfs":"tank/medforge/workspaces/00000000-0000-0000-0000-0000000000a1/7e2931de-a704-4e93-afe9-2ce5912c5271","created_at":"2026-02-16T08:13:04.445462","started_at":"2026-02-16T08:13:04.756344","stopped_at":null,"error_message":null}}`
- create B: `{"detail":"Session started.","session":{"id":"bf8ec019-95ad-40fa-94ef-c79b52ccd45d","user_id":"00000000-0000-0000-0000-0000000000b2","tier":"PUBLIC","pack_id":"00000000-0000-0000-0000-000000000100","status":"running","container_id":"2b8f290586e5f3a0a34c66ecf204c9a58e1732f396b9ec52637014039bfb403b","gpu_id":1,"slug":"mei5mlhy","workspace_zfs":"tank/medforge/workspaces/00000000-0000-0000-0000-0000000000b2/bf8ec019-95ad-40fa-94ef-c79b52ccd45d","created_at":"2026-02-16T08:13:04.803961","started_at":"2026-02-16T08:13:05.129926","stopped_at":null,"error_message":null}}`

### Gate 5 Auth Matrix

- unauthenticated: `401` body=`{"detail":"Authentication required."}`
- non-owner: `403` body=`{"detail":"Session access denied."}`
- owner spoof attempt: `200` x-upstream=`mf-session-pmqtcizg:8080`

### Gate 5 Isolation

- firewall: `East–west isolation applied (bridge=br-42fb65ed835a, caddy=172.30.0.2)`
- session B -> session A :8080 blocked (exit=`28`, stderr=`curl: (28) Connection timed out after 3002 milliseconds`)

### Gate 6 End-to-End Core

- GPU in session A: `NVIDIA GeForce RTX 5090`
- workspace write/read: `alpha`
- stop A: `{"detail":"Session stop requested."}`
- stopped host check: `404` body=`{"detail":"Session not found."}`
- snapshot: `tank/medforge/workspaces/00000000-0000-0000-0000-0000000000a1/7e2931de-a704-4e93-afe9-2ce5912c5271@stop-1771229589235`
- stop B: `{"detail":"Session stop requested."}`

### Gate 5/6 Browser + Websocket

- browser base URL: `http://medforge.localtest.me:18080`
- e2e user: `e2e-1771229583@medforge.test`
- wildcard session URL: `http://s-kjyqddb5.medforge.localtest.me:18080`
- wildcard slug: `kjyqddb5`
- websocket attempts observed: `1`
- websocket connections with frame traffic: `1`
- websocket auth 403 entries: `0`

### API Log Snippet

```text
INFO:     Started server process [317395]
INFO:     Waiting for application startup.
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade  -> 2474ec93cdb5, initial_schema
2026-02-16 17:13:04 [info     ] session.start                  gpu_id=0 pack_id=00000000-0000-0000-0000-000000000100 session_id=7e2931de-a704-4e93-afe9-2ce5912c5271 slug=pmqtcizg tier=PUBLIC user_id=00000000-0000-0000-0000-0000000000a1
2026-02-16 17:13:05 [info     ] session.start                  gpu_id=1 pack_id=00000000-0000-0000-0000-000000000100 session_id=bf8ec019-95ad-40fa-94ef-c79b52ccd45d slug=mei5mlhy tier=PUBLIC user_id=00000000-0000-0000-0000-0000000000b2
2026-02-16 17:13:09 [info     ] session.stop                   gpu_id=0 pack_id=00000000-0000-0000-0000-000000000100 reason=requested session_id=7e2931de-a704-4e93-afe9-2ce5912c5271 slug=pmqtcizg tier=PUBLIC user_id=00000000-0000-0000-0000-0000000000a1
2026-02-16 17:13:09 [info     ] session.recovery.decision      container_id=2b8f290586e5f3a0a34c66ecf204c9a58e1732f396b9ec52637014039bfb403b session_id=bf8ec019-95ad-40fa-94ef-c79b52ccd45d slug=mei5mlhy state=running user_id=00000000-0000-0000-0000-0000000000b2
2026-02-16 17:13:09 [info     ] session.poll.updated           updated=1
2026-02-16 17:13:14 [info     ] session.stop                   gpu_id=1 pack_id=00000000-0000-0000-0000-000000000100 reason=requested session_id=bf8ec019-95ad-40fa-94ef-c79b52ccd45d slug=mei5mlhy tier=PUBLIC user_id=00000000-0000-0000-0000-0000000000b2
2026-02-16 17:13:14 [info     ] session.poll.updated           updated=1
2026-02-16 17:13:28 [info     ] session.start                  gpu_id=0 pack_id=00000000-0000-0000-0000-000000000100 session_id=c62f05bf-83b8-4a97-b8e2-33b5c27ebdab slug=kjyqddb5 tier=PUBLIC user_id=762b9771-9b90-4964-8967-12c9a22d4a2d
2026-02-16 17:13:29 [info     ] session.recovery.decision      container_id=795223d64a235eb9b3e574ac5f6502d009b3e745f461afcc4e599fb56bdbe551 session_id=c62f05bf-83b8-4a97-b8e2-33b5c27ebdab slug=kjyqddb5 state=running user_id=762b9771-9b90-4964-8967-12c9a22d4a2d
```

### Web Log Snippet

```text

> medforge-web@0.1.0 dev
> next dev --hostname 0.0.0.0 --port 3000

▲ Next.js 16.1.6 (Turbopack)
- Local:         http://localhost:3000
- Network:       http://0.0.0.0:3000

✓ Starting...
✓ Ready in 241ms
⨯ TypeError: fetch failed
    at async apiGet (lib/api.ts:103:15)
    at async HomePage (app/page.tsx:11:24)
  101 | }
  102 | export async function apiGet<T>(path: string): Promise<T> {
> 103 |   const res = await fetch(toApiUrl(path), {
      |               ^
  104 |     cache: "no-store",
  105 |     credentials: "include"
  106 |   }); {
  digest: '2415382319',
  [cause]: AggregateError: 
      at ignore-listed frames {
    code: 'ECONNREFUSED'
  }
}
 GET / 500 in 594ms (compile: 262ms, render: 332ms)
 GET / 200 in 42ms (compile: 1442µs, render: 41ms)
 GET /auth/login 200 in 76ms (compile: 42ms, render: 34ms)
⚠ Cross origin request detected from medforge.localtest.me to /_next/* resource. In a future major version of Next.js, you will need to explicitly configure "allowedDevOrigins" in next.config to allow this.
Read more: https://nextjs.org/docs/app/api-reference/config/next-config-js/allowedDevOrigins
 GET /auth/signup 200 in 65ms (compile: 39ms, render: 26ms)
 GET /sessions 200 in 43ms (compile: 21ms, render: 23ms)
 GET /auth/login 200 in 17ms (compile: 1500µs, render: 16ms)
 GET /sessions 200 in 17ms (compile: 1280µs, render: 16ms)
```

### Caddy Log Snippet

```text
{"level":"info","ts":1771229596.4012024,"msg":"maxprocs: Leaving GOMAXPROCS=128: CPU quota undefined"}
{"level":"info","ts":1771229596.4016628,"msg":"GOMEMLIMIT is updated","package":"github.com/KimMachineGun/automemlimit/memlimit","GOMEMLIMIT":486097521868,"previous":9223372036854775807}
{"level":"info","ts":1771229596.4018667,"msg":"using config from file","file":"/etc/caddy/Caddyfile"}
{"level":"warn","ts":1771229596.4028778,"logger":"caddyfile","msg":"Unnecessary header_up X-Forwarded-For: the reverse proxy's default behavior is to pass headers to the upstream"}
{"level":"warn","ts":1771229596.4029255,"logger":"caddyfile","msg":"Unnecessary header_up X-Forwarded-Proto: the reverse proxy's default behavior is to pass headers to the upstream"}
{"level":"info","ts":1771229596.40329,"msg":"adapted config to JSON","adapter":"caddyfile"}
{"level":"warn","ts":1771229596.4032934,"msg":"Caddyfile input is not formatted; run 'caddy fmt --overwrite' to fix inconsistencies","adapter":"caddyfile","file":"/etc/caddy/Caddyfile","line":2}
{"level":"info","ts":1771229596.403983,"logger":"admin","msg":"admin endpoint started","address":"localhost:2019","enforce_origin":false,"origins":["//localhost:2019","//[::1]:2019","//127.0.0.1:2019"]}
{"level":"info","ts":1771229596.4041147,"logger":"http.auto_https","msg":"automatic HTTPS is completely disabled for server","server_name":"srv0"}
{"level":"info","ts":1771229596.404168,"logger":"tls.cache.maintenance","msg":"started background certificate maintenance","cache":"0xc000998000"}
{"level":"warn","ts":1771229596.4048302,"logger":"http","msg":"HTTP/2 skipped because it requires TLS","network":"tcp","addr":":18080"}
{"level":"warn","ts":1771229596.404845,"logger":"http","msg":"HTTP/3 skipped because it requires TLS","network":"tcp","addr":":18080"}
{"level":"info","ts":1771229596.4048471,"logger":"http.log","msg":"server running","name":"srv0","protocols":["h1","h2","h3"]}
{"level":"info","ts":1771229596.4162877,"msg":"autosaved config (load with --resume flag)","file":"/config/caddy/autosave.json"}
{"level":"info","ts":1771229596.4162965,"msg":"serving initial configuration"}
{"level":"info","ts":1771229596.421188,"logger":"tls","msg":"cleaning storage unit","storage":"FileStorage:/data/caddy"}
{"level":"info","ts":1771229596.4241002,"logger":"tls","msg":"finished cleaning storage units"}
```
