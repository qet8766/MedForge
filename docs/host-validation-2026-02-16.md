## Host Validation Evidence (2026-02-16)

Generated by: `infra/host/validate-gate56.sh`

Runtime:
- API URL: `http://127.0.0.1:8000`
- Pack image: `medforge-pack-default:local@sha256:120a60a1b01bb7d61b2aff516d12ab728f9dc3a1237e9f2fc04d04530676cc43`
- DB path: `/home/shk/projects/MedForge/apps/api/gate-evidence.db`
- Browser lane enabled: `true`
- Browser base URL: `http://medforge.localtest.me:18080`
- Browser domain: `localtest.me`
- Browser user: `e2e-1771215185@medforge.test`

### Create Sessions

- create A: `{"detail":"Session started.","session":{"id":"377238ad-12ec-4d99-be14-f0045ae6073b","user_id":"00000000-0000-0000-0000-0000000000a1","tier":"PUBLIC","pack_id":"00000000-0000-0000-0000-000000000100","status":"running","container_id":"e65189219935e26f3f5fc24fa103090d95ab544ed8477756f340733cc19b7b8b","gpu_id":0,"slug":"feb4jmf2","workspace_zfs":"tank/medforge/workspaces/00000000-0000-0000-0000-0000000000a1/377238ad-12ec-4d99-be14-f0045ae6073b","created_at":"2026-02-16T04:13:06.638768","started_at":"2026-02-16T04:13:06.915072","stopped_at":null,"error_message":null}}`
- create B: `{"detail":"Session started.","session":{"id":"76b00948-9ae0-4ee3-a22d-f864fa593d71","user_id":"00000000-0000-0000-0000-0000000000b2","tier":"PUBLIC","pack_id":"00000000-0000-0000-0000-000000000100","status":"running","container_id":"7253f3d0e231244c237875eb04305ef540dc17274a7c6bc5f0c26afd613053a6","gpu_id":1,"slug":"mtza4ldw","workspace_zfs":"tank/medforge/workspaces/00000000-0000-0000-0000-0000000000b2/76b00948-9ae0-4ee3-a22d-f864fa593d71","created_at":"2026-02-16T04:13:06.962758","started_at":"2026-02-16T04:13:07.254717","stopped_at":null,"error_message":null}}`

### Gate 5 Auth Matrix

- unauthenticated: `401` body=`{"detail":"Authentication required."}`
- non-owner: `403` body=`{"detail":"Session access denied."}`
- owner spoof attempt: `200` x-upstream=`mf-session-feb4jmf2:8080`

### Gate 5 Isolation

- firewall: `East–west isolation applied (bridge=br-42fb65ed835a, caddy=172.30.0.2)`
- session B -> session A :8080 blocked (exit=`28`, stderr=`curl: (28) Connection timed out after 3002 milliseconds`)

### Gate 6 End-to-End Core

- GPU in session A: `NVIDIA GeForce RTX 5090`
- workspace write/read: `alpha`
- stop A: `{"detail":"Session stopped.","session":{"id":"377238ad-12ec-4d99-be14-f0045ae6073b","user_id":"00000000-0000-0000-0000-0000000000a1","tier":"PUBLIC","pack_id":"00000000-0000-0000-0000-000000000100","status":"stopped","container_id":"e65189219935e26f3f5fc24fa103090d95ab544ed8477756f340733cc19b7b8b","gpu_id":0,"slug":"feb4jmf2","workspace_zfs":"tank/medforge/workspaces/00000000-0000-0000-0000-0000000000a1/377238ad-12ec-4d99-be14-f0045ae6073b","created_at":"2026-02-16T04:13:06.638768","started_at":"2026-02-16T04:13:06.915072","stopped_at":"2026-02-16T04:13:10.741902","error_message":null}}`
- stopped host check: `404` body=`{"detail":"Session not found."}`
- snapshot: `tank/medforge/workspaces/00000000-0000-0000-0000-0000000000a1/377238ad-12ec-4d99-be14-f0045ae6073b@stop-1771215190726`
- stop B: `{"detail":"Session stopped.","session":{"id":"76b00948-9ae0-4ee3-a22d-f864fa593d71","user_id":"00000000-0000-0000-0000-0000000000b2","tier":"PUBLIC","pack_id":"00000000-0000-0000-0000-000000000100","status":"stopped","container_id":"7253f3d0e231244c237875eb04305ef540dc17274a7c6bc5f0c26afd613053a6","gpu_id":1,"slug":"mtza4ldw","workspace_zfs":"tank/medforge/workspaces/00000000-0000-0000-0000-0000000000b2/76b00948-9ae0-4ee3-a22d-f864fa593d71","created_at":"2026-02-16T04:13:06.962758","started_at":"2026-02-16T04:13:07.254717","stopped_at":"2026-02-16T04:13:10.916563","error_message":null}}`

### Gate 5/6 Browser + Websocket

- browser base URL: `http://medforge.localtest.me:18080`
- e2e user: `e2e-1771215185@medforge.test`
- wildcard session URL: `http://s-gwuljlvv.medforge.localtest.me:18080`
- wildcard slug: `gwuljlvv`
- websocket attempts observed: `1`
- websocket connections with frame traffic: `1`
- websocket auth 403 entries: `0`

### API Log Snippet

```text
INFO:     Started server process [209127]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     127.0.0.1:47038 - "GET /healthz HTTP/1.1" 200 OK
2026-02-16 13:13:06 [info     ] session.start                  gpu_id=0 pack_id=00000000-0000-0000-0000-000000000100 session_id=377238ad-12ec-4d99-be14-f0045ae6073b slug=feb4jmf2 tier=PUBLIC user_id=00000000-0000-0000-0000-0000000000a1
INFO:     127.0.0.1:47042 - "POST /api/sessions HTTP/1.1" 201 Created
2026-02-16 13:13:07 [info     ] session.start                  gpu_id=1 pack_id=00000000-0000-0000-0000-000000000100 session_id=76b00948-9ae0-4ee3-a22d-f864fa593d71 slug=mtza4ldw tier=PUBLIC user_id=00000000-0000-0000-0000-0000000000b2
INFO:     127.0.0.1:47050 - "POST /api/sessions HTTP/1.1" 201 Created
INFO:     127.0.0.1:47062 - "GET /api/auth/session-proxy HTTP/1.1" 401 Unauthorized
INFO:     127.0.0.1:47070 - "GET /api/auth/session-proxy HTTP/1.1" 403 Forbidden
INFO:     127.0.0.1:47072 - "GET /api/auth/session-proxy HTTP/1.1" 200 OK
2026-02-16 13:13:10 [info     ] session.stop                   gpu_id=0 pack_id=00000000-0000-0000-0000-000000000100 reason=user session_id=377238ad-12ec-4d99-be14-f0045ae6073b slug=feb4jmf2 tier=PUBLIC user_id=00000000-0000-0000-0000-0000000000a1
INFO:     127.0.0.1:45630 - "POST /api/sessions/377238ad-12ec-4d99-be14-f0045ae6073b/stop HTTP/1.1" 200 OK
INFO:     127.0.0.1:45642 - "GET /api/auth/session-proxy HTTP/1.1" 404 Not Found
2026-02-16 13:13:10 [info     ] session.stop                   gpu_id=1 pack_id=00000000-0000-0000-0000-000000000100 reason=user session_id=76b00948-9ae0-4ee3-a22d-f864fa593d71 slug=mtza4ldw tier=PUBLIC user_id=00000000-0000-0000-0000-0000000000b2
INFO:     127.0.0.1:45648 - "POST /api/sessions/76b00948-9ae0-4ee3-a22d-f864fa593d71/stop HTTP/1.1" 200 OK
INFO:     172.30.0.2:40506 - "GET /api/competitions HTTP/1.1" 200 OK
INFO:     172.30.0.2:40506 - "POST /api/auth/login HTTP/1.1" 401 Unauthorized
(trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/home/shk/projects/MedForge/apps/api/.venv/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
INFO:     172.30.0.2:54458 - "POST /api/auth/signup HTTP/1.1" 201 Created
INFO:     172.30.0.2:54458 - "POST /api/auth/logout HTTP/1.1" 200 OK
INFO:     172.30.0.2:54458 - "POST /api/auth/login HTTP/1.1" 200 OK
2026-02-16 13:13:24 [info     ] session.start                  gpu_id=0 pack_id=00000000-0000-0000-0000-000000000100 session_id=9d78243b-538c-4c09-b03f-b86adb7bd0f4 slug=gwuljlvv tier=PUBLIC user_id=4c6a88c2-8670-4dfe-ab3d-4d638496bf7d
INFO:     172.30.0.2:54458 - "POST /api/sessions HTTP/1.1" 201 Created
INFO:     172.30.0.2:54466 - "GET /api/auth/session-proxy HTTP/1.1" 200 OK
INFO:     172.30.0.2:54466 - "GET /api/auth/session-proxy?folder=/workspace HTTP/1.1" 200 OK
INFO:     172.30.0.2:54480 - "GET /api/auth/session-proxy HTTP/1.1" 200 OK
INFO:     172.30.0.2:54466 - "GET /api/auth/session-proxy HTTP/1.1" 200 OK
INFO:     172.30.0.2:54480 - "GET /api/auth/session-proxy HTTP/1.1" 200 OK
INFO:     172.30.0.2:54480 - "GET /api/auth/session-proxy?reconnectionToken=436f0fed-994d-48a7-85bf-acbf4b4ef87a&reconnection=false&skipWebSocketFrames=false HTTP/1.1" 200 OK
INFO:     172.30.0.2:54480 - "GET /api/auth/session-proxy HTTP/1.1" 200 OK
INFO:     172.30.0.2:54466 - "GET /api/auth/session-proxy HTTP/1.1" 200 OK
INFO:     172.30.0.2:54466 - "GET /api/auth/session-proxy HTTP/1.1" 200 OK
INFO:     172.30.0.2:54466 - "GET /api/auth/session-proxy HTTP/1.1" 200 OK
INFO:     172.30.0.2:54480 - "GET /api/auth/session-proxy HTTP/1.1" 200 OK
INFO:     172.30.0.2:54480 - "GET /api/auth/session-proxy?&vscodeWebWorkerExtHostId=acec324e-457c-4f15-9622-f48558d43f54 HTTP/1.1" 200 OK
INFO:     172.30.0.2:54466 - "GET /api/auth/session-proxy?reconnectionToken=3c6195d4-cd24-42ac-86c7-6b717535b4bb&reconnection=false&skipWebSocketFrames=false HTTP/1.1" 200 OK
2026-02-16 13:13:27 [info     ] session.stop                   gpu_id=0 pack_id=00000000-0000-0000-0000-000000000100 reason=user session_id=9d78243b-538c-4c09-b03f-b86adb7bd0f4 slug=gwuljlvv tier=PUBLIC user_id=4c6a88c2-8670-4dfe-ab3d-4d638496bf7d
INFO:     172.30.0.2:54458 - "POST /api/sessions/9d78243b-538c-4c09-b03f-b86adb7bd0f4/stop HTTP/1.1" 200 OK
```

### Web Log Snippet

```text

> medforge-web@0.1.0 dev
> next dev --hostname 0.0.0.0 --port 3000

▲ Next.js 16.1.6 (Turbopack)
- Local:         http://localhost:3000
- Network:       http://0.0.0.0:3000

✓ Starting...
✓ Ready in 218ms
⨯ TypeError: fetch failed
    at async apiGet (lib/api.ts:84:15)
    at async HomePage (app/page.tsx:5:24)
  82 |
  83 | export async function apiGet<T>(path: string): Promise<T> {
> 84 |   const res = await fetch(`${API_BASE}${path}`, {
     |               ^
  85 |     cache: "no-store",
  86 |     credentials: "include"
  87 |   }); {
  digest: '2179944820',
  [cause]: AggregateError: 
      at ignore-listed frames {
    code: 'ECONNREFUSED'
  }
}
 GET / 500 in 166ms (compile: 87ms, render: 80ms)
 GET / 200 in 35ms (compile: 2ms, render: 33ms)
 GET /auth/login 200 in 31ms (compile: 10ms, render: 21ms)
⚠ Cross origin request detected from medforge.localtest.me to /_next/* resource. In a future major version of Next.js, you will need to explicitly configure "allowedDevOrigins" in next.config to allow this.
Read more: https://nextjs.org/docs/app/api-reference/config/next-config-js/allowedDevOrigins
 GET /auth/signup 200 in 27ms (compile: 10ms, render: 18ms)
 GET /sessions 200 in 33ms (compile: 10ms, render: 23ms)
 GET /auth/login 200 in 15ms (compile: 1142µs, render: 14ms)
 GET /sessions 200 in 15ms (compile: 1310µs, render: 13ms)
```

### Caddy Log Snippet

```text
{"level":"info","ts":1771215192.3129485,"msg":"maxprocs: Leaving GOMAXPROCS=128: CPU quota undefined"}
{"level":"info","ts":1771215192.3130355,"msg":"GOMEMLIMIT is updated","package":"github.com/KimMachineGun/automemlimit/memlimit","GOMEMLIMIT":486097521868,"previous":9223372036854775807}
{"level":"info","ts":1771215192.3130515,"msg":"using config from file","file":"/etc/caddy/Caddyfile"}
{"level":"warn","ts":1771215192.3134456,"logger":"caddyfile","msg":"Unnecessary header_up X-Forwarded-For: the reverse proxy's default behavior is to pass headers to the upstream"}
{"level":"warn","ts":1771215192.3134704,"logger":"caddyfile","msg":"Unnecessary header_up X-Forwarded-Proto: the reverse proxy's default behavior is to pass headers to the upstream"}
{"level":"info","ts":1771215192.3138373,"msg":"adapted config to JSON","adapter":"caddyfile"}
{"level":"warn","ts":1771215192.3138406,"msg":"Caddyfile input is not formatted; run 'caddy fmt --overwrite' to fix inconsistencies","adapter":"caddyfile","file":"/etc/caddy/Caddyfile","line":2}
{"level":"info","ts":1771215192.3152885,"logger":"admin","msg":"admin endpoint started","address":"localhost:2019","enforce_origin":false,"origins":["//localhost:2019","//[::1]:2019","//127.0.0.1:2019"]}
{"level":"info","ts":1771215192.3154635,"logger":"http.auto_https","msg":"automatic HTTPS is completely disabled for server","server_name":"srv0"}
{"level":"info","ts":1771215192.3155525,"logger":"tls.cache.maintenance","msg":"started background certificate maintenance","cache":"0xc0003e8500"}
{"level":"warn","ts":1771215192.3160837,"logger":"http","msg":"HTTP/2 skipped because it requires TLS","network":"tcp","addr":":18080"}
{"level":"warn","ts":1771215192.3161044,"logger":"http","msg":"HTTP/3 skipped because it requires TLS","network":"tcp","addr":":18080"}
{"level":"info","ts":1771215192.3161068,"logger":"http.log","msg":"server running","name":"srv0","protocols":["h1","h2","h3"]}
{"level":"info","ts":1771215192.3243036,"msg":"autosaved config (load with --resume flag)","file":"/config/caddy/autosave.json"}
{"level":"info","ts":1771215192.3243115,"msg":"serving initial configuration"}
{"level":"info","ts":1771215192.329054,"logger":"tls","msg":"cleaning storage unit","storage":"FileStorage:/data/caddy"}
{"level":"info","ts":1771215192.3318272,"logger":"tls","msg":"finished cleaning storage units"}
```
